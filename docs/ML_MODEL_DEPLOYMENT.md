# CNET Agent æœºå™¨å­¦ä¹ æ¨¡å‹éƒ¨ç½²æŒ‡å—

## ğŸ¯ æ¦‚è¿°

CNET Agent ç°åœ¨æ”¯æŒåœ¨åˆ†å¸ƒå¼èŠ‚ç‚¹ä¸Šéƒ¨ç½²å’Œè¿è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚æœ¬æŒ‡å—å°†è¯¦ç»†ä»‹ç»å¦‚ä½•éƒ¨ç½²ã€ç®¡ç†å’Œä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ¤– å¤šç§æ¨¡å‹æ”¯æŒ**: æ”¯æŒçº¿æ€§å›å½’ã€ç¥ç»ç½‘ç»œã€æ·±åº¦å­¦ä¹ ç­‰æ¨¡å‹
- **ğŸ“Š å®æ—¶ç›‘æ§**: å®æ—¶ç›‘æ§æ¨¡å‹è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹
- **ğŸ”„ åŠ¨æ€éƒ¨ç½²**: æ”¯æŒåŠ¨æ€éƒ¨ç½²å’Œåœæ­¢æ¨¡å‹
- **ğŸ“ˆ èµ„æºç®¡ç†**: æ™ºèƒ½èµ„æºåˆ†é…å’Œé™åˆ¶
- **ğŸ“ æ—¥å¿—è®°å½•**: å®Œæ•´çš„è®­ç»ƒå’Œæ¨ç†æ—¥å¿—
- **ğŸŒ APIæ¥å£**: RESTful APIç®¡ç†æ¨¡å‹
- **ğŸ’» Web UI**: å›¾å½¢åŒ–ç®¡ç†ç•Œé¢

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CNET Agent    â”‚    â”‚   CNET Agent    â”‚    â”‚   CNET Agent    â”‚
â”‚   (Node 1)      â”‚    â”‚   (Node 2)      â”‚    â”‚   (Node 3)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - ML Models     â”‚    â”‚ - ML Models     â”‚    â”‚ - ML Models     â”‚
â”‚ - Training      â”‚    â”‚ - Inference     â”‚    â”‚ - Training      â”‚
â”‚ - Monitoring    â”‚    â”‚ - Monitoring   â”‚    â”‚ - Monitoring    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ æ”¯æŒçš„æ¨¡å‹ç±»å‹

### 1. çº¿æ€§å›å½’æ¨¡å‹
- **ç”¨é€”**: ç®€å•é¢„æµ‹ä»»åŠ¡
- **ç‰¹ç‚¹**: å¿«é€Ÿè®­ç»ƒï¼Œèµ„æºå ç”¨å°‘
- **é€‚ç”¨åœºæ™¯**: æ•°å€¼é¢„æµ‹ã€è¶‹åŠ¿åˆ†æ

### 2. ç¥ç»ç½‘ç»œæ¨¡å‹
- **ç”¨é€”**: å¤æ‚éçº¿æ€§é¢„æµ‹
- **ç‰¹ç‚¹**: é«˜ç²¾åº¦ï¼Œéœ€è¦æ›´å¤šèµ„æº
- **é€‚ç”¨åœºæ™¯**: å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†

### 3. è‡ªå®šä¹‰æ¨¡å‹
- **ç”¨é€”**: ç”¨æˆ·è‡ªå®šä¹‰çš„æœºå™¨å­¦ä¹ æ¨¡å‹
- **ç‰¹ç‚¹**: çµæ´»é…ç½®ï¼Œæ”¯æŒå„ç§æ¡†æ¶
- **é€‚ç”¨åœºæ™¯**: ç‰¹å®šä¸šåŠ¡éœ€æ±‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…Pythonå’Œå¿…è¦çš„æœºå™¨å­¦ä¹ åº“ï¼š

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r examples/ml_models/requirements.txt
```

### 2. å¯åŠ¨CNET Agent

```bash
# å¯åŠ¨CNET Agent
./bin/cnet-agent -config config.yaml
```

### 3. éƒ¨ç½²æ¨¡å‹

#### éƒ¨ç½²çº¿æ€§å›å½’æ¨¡å‹

```bash
curl -X POST "http://localhost:8080/api/ml/models" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "linear-regression-model",
    "model_type": "linear_regression",
    "model_path": "models/linear_regression_model.joblib",
    "script_path": "examples/ml_models/simple_linear_regression.py",
    "command": "python3",
    "args": ["examples/ml_models/simple_linear_regression.py", "train", "models/linear_regression_model.joblib", "1000"],
    "working_dir": ".",
    "env": {
      "PYTHONPATH": "examples/ml_models"
    },
    "resources": {
      "cpu_limit": 1.0,
      "memory_limit": 512000000,
      "disk_limit": 1000000000
    }
  }'
```

#### éƒ¨ç½²ç¥ç»ç½‘ç»œæ¨¡å‹

```bash
curl -X POST "http://localhost:8080/api/ml/models" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "neural-network-model",
    "model_type": "neural_network",
    "model_path": "models/neural_network_model.h5",
    "script_path": "examples/ml_models/neural_network.py",
    "command": "python3",
    "args": ["examples/ml_models/neural_network.py", "train", "models/neural_network_model.h5", "1000", "50"],
    "working_dir": ".",
    "env": {
      "PYTHONPATH": "examples/ml_models"
    },
    "resources": {
      "cpu_limit": 2.0,
      "memory_limit": 1024000000,
      "disk_limit": 2000000000
    }
  }'
```

## ğŸ“š API å‚è€ƒ

### æœºå™¨å­¦ä¹ æ¨¡å‹ç®¡ç†

#### 1. åˆ—å‡ºæ‰€æœ‰MLæ¨¡å‹
```http
GET /api/ml/models
```

**å“åº”ç¤ºä¾‹:**
```json
[
  {
    "id": "task-uuid-1",
    "name": "linear-regression-model",
    "type": "ml_model",
    "status": "running",
    "command": "python3",
    "args": ["examples/ml_models/simple_linear_regression.py", "train", "models/linear_regression_model.joblib", "1000"],
    "env": {
      "PYTHONPATH": "examples/ml_models",
      "MODEL_PATH": "models/linear_regression_model.joblib",
      "MODEL_TYPE": "linear_regression"
    },
    "working_dir": ".",
    "resources": {
      "cpu_limit": 1.0,
      "memory_limit": 512000000,
      "disk_limit": 1000000000
    },
    "created_at": "2024-01-01T00:00:00Z",
    "started_at": "2024-01-01T00:00:01Z"
  }
]
```

#### 2. éƒ¨ç½²MLæ¨¡å‹
```http
POST /api/ml/models
```

**è¯·æ±‚ä½“:**
```json
{
  "name": "my-model",
  "model_type": "linear_regression",
  "model_path": "models/my_model.joblib",
  "script_path": "examples/ml_models/simple_linear_regression.py",
  "command": "python3",
  "args": ["script.py", "train", "model.joblib", "1000"],
  "env": {
    "PYTHONPATH": "examples/ml_models"
  },
  "working_dir": ".",
  "resources": {
    "cpu_limit": 1.0,
    "memory_limit": 512000000,
    "disk_limit": 1000000000
  }
}
```

#### 3. è·å–MLæ¨¡å‹ä¿¡æ¯
```http
GET /api/ml/models/{id}
```

#### 4. åœæ­¢MLæ¨¡å‹
```http
DELETE /api/ml/models/{id}
```

#### 5. ä½¿ç”¨MLæ¨¡å‹è¿›è¡Œé¢„æµ‹
```http
POST /api/ml/models/{id}/predict
```

**è¯·æ±‚ä½“:**
```json
{
  "input_data": 5.5
}
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "prediction_task_id": "prediction-task-uuid",
  "message": "Prediction task created"
}
```

#### 6. è·å–MLæ¨¡å‹æ—¥å¿—
```http
GET /api/ml/models/{id}/logs?lines=100
```

## ğŸ¨ Web UI ç®¡ç†

è®¿é—® `http://localhost:8080` æ‰“å¼€Webç®¡ç†ç•Œé¢ï¼š

### åŠŸèƒ½ç‰¹æ€§
- **ğŸ“Š æ¨¡å‹æ¦‚è§ˆ**: æŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²çš„æ¨¡å‹
- **ğŸš€ æ¨¡å‹éƒ¨ç½²**: å›¾å½¢åŒ–éƒ¨ç½²æ–°æ¨¡å‹
- **ğŸ“ˆ å®æ—¶ç›‘æ§**: ç›‘æ§æ¨¡å‹è®­ç»ƒå’Œæ¨ç†çŠ¶æ€
- **ğŸ“ æ—¥å¿—æŸ¥çœ‹**: å®æ—¶æŸ¥çœ‹æ¨¡å‹æ—¥å¿—
- **âš™ï¸ èµ„æºç®¡ç†**: æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ“ æ¨¡å‹è„šæœ¬å¼€å‘

### æ ‡å‡†æ¥å£

æ‰€æœ‰æœºå™¨å­¦ä¹ æ¨¡å‹è„šæœ¬å¿…é¡»æ”¯æŒä»¥ä¸‹å‘½ä»¤ï¼š

1. **è®­ç»ƒæ¨¡å‹**: `python script.py train <model_path> [args...]`
2. **æ¨¡å‹é¢„æµ‹**: `python script.py predict <model_path> <input_data>`
3. **æ¨¡å‹è¯„ä¼°**: `python script.py evaluate <model_path>`

### è¾“å‡ºæ ¼å¼

æ‰€æœ‰å‘½ä»¤çš„è¾“å‡ºå¿…é¡»æ˜¯JSONæ ¼å¼ï¼š

```json
{
  "status": "success",
  "model_path": "models/model.joblib",
  "prediction": 5.5,
  "model_info": {
    "coefficient": 2.0,
    "intercept": 3.0
  }
}
```

### ç¤ºä¾‹è„šæœ¬

å‚è€ƒ `examples/ml_models/` ç›®å½•ä¸‹çš„ç¤ºä¾‹è„šæœ¬ï¼š
- `simple_linear_regression.py` - çº¿æ€§å›å½’æ¨¡å‹
- `neural_network.py` - ç¥ç»ç½‘ç»œæ¨¡å‹

## ğŸ”§ é…ç½®é€‰é¡¹

### èµ„æºé™åˆ¶

```json
{
  "resources": {
    "cpu_limit": 1.0,        // CPUæ ¸å¿ƒæ•°é™åˆ¶
    "memory_limit": 512000000, // å†…å­˜é™åˆ¶ï¼ˆå­—èŠ‚ï¼‰
    "disk_limit": 1000000000   // ç£ç›˜é™åˆ¶ï¼ˆå­—èŠ‚ï¼‰
  }
}
```

### ç¯å¢ƒå˜é‡

```json
{
  "env": {
    "PYTHONPATH": "examples/ml_models",
    "MODEL_PATH": "models/model.joblib",
    "MODEL_TYPE": "linear_regression"
  }
}
```

## ğŸš€ éƒ¨ç½²ç¤ºä¾‹

### ä½¿ç”¨æ¼”ç¤ºè„šæœ¬

```bash
# è¿è¡Œå®Œæ•´çš„éƒ¨ç½²æ¼”ç¤º
chmod +x examples/ml_deployment_demo.sh
./examples/ml_deployment_demo.sh
```

### æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

1. **å¯åŠ¨CNET Agent**
   ```bash
   ./bin/cnet-agent -config config.yaml
   ```

2. **éƒ¨ç½²æ¨¡å‹**
   ```bash
   curl -X POST "http://localhost:8080/api/ml/models" \
     -H "Content-Type: application/json" \
     -d @model_deployment.json
   ```

3. **ç›‘æ§æ¨¡å‹çŠ¶æ€**
   ```bash
   curl -s "http://localhost:8080/api/ml/models" | jq '.'
   ```

4. **è¿›è¡Œé¢„æµ‹**
   ```bash
   curl -X POST "http://localhost:8080/api/ml/models/$MODEL_ID/predict" \
     -H "Content-Type: application/json" \
     -d '{"input_data": 5.5}'
   ```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ¨¡å‹éƒ¨ç½²å¤±è´¥**
   - æ£€æŸ¥Pythonç¯å¢ƒå’Œä¾èµ–
   - éªŒè¯è„šæœ¬è·¯å¾„å’Œæƒé™
   - æŸ¥çœ‹ä»»åŠ¡æ—¥å¿—

2. **é¢„æµ‹ç»“æœå¼‚å¸¸**
   - æ£€æŸ¥è¾“å…¥æ•°æ®æ ¼å¼
   - éªŒè¯æ¨¡å‹æ–‡ä»¶å®Œæ•´æ€§
   - æŸ¥çœ‹é¢„æµ‹ä»»åŠ¡æ—¥å¿—

3. **èµ„æºä¸è¶³**
   - è°ƒæ•´èµ„æºé™åˆ¶
   - æ£€æŸ¥èŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µ
   - ä¼˜åŒ–æ¨¡å‹å‚æ•°

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ¨¡å‹æ—¥å¿—
curl -s "http://localhost:8080/api/ml/models/$MODEL_ID/logs"

# æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡æ—¥å¿—
curl -s "http://localhost:8080/api/tasks" | jq '.[].log_file'
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### èµ„æºä¼˜åŒ–
- åˆç†è®¾ç½®CPUå’Œå†…å­˜é™åˆ¶
- ä½¿ç”¨SSDå­˜å‚¨æé«˜I/Oæ€§èƒ½
- å¯ç”¨GPUåŠ é€Ÿï¼ˆå¦‚æœå¯ç”¨ï¼‰

### æ¨¡å‹ä¼˜åŒ–
- ä½¿ç”¨æ¨¡å‹å‹ç¼©æŠ€æœ¯
- å®ç°æ‰¹é‡é¢„æµ‹
- ç¼“å­˜å¸¸ç”¨é¢„æµ‹ç»“æœ

## ğŸ”® æœªæ¥è§„åˆ’

- [ ] GPUæ”¯æŒ
- [ ] æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
- [ ] è‡ªåŠ¨æ‰©ç¼©å®¹
- [ ] æ¨¡å‹æ€§èƒ½ç›‘æ§
- [ ] åˆ†å¸ƒå¼è®­ç»ƒæ”¯æŒ
- [ ] æ¨¡å‹å¸‚åœº

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
2. æ£€æŸ¥APIå“åº”
3. å‚è€ƒç¤ºä¾‹ä»£ç 
4. æäº¤Issue

---

**CNET Agent æœºå™¨å­¦ä¹ æ¨¡å‹éƒ¨ç½²åŠŸèƒ½è®©æ‚¨è½»æ¾åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­éƒ¨ç½²å’Œç®¡ç†æœºå™¨å­¦ä¹ æ¨¡å‹ï¼** ğŸš€
